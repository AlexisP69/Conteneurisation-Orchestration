<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>DataPress – POC</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 2rem; }
        h1 { color: #333; }
        .status { margin-top: 1rem; padding: 0.5rem 1rem; border: 1px solid #ccc; border-radius: 4px; }
        code { background: #f5f5f5; padding: 2px 4px; border-radius: 3px; }
    </style>
</head>
<body>
    <h1>DataPress – POC</h1>
    <p><strong>Version :</strong> v1.0 POC</p>

    <p>
        API principale : 
        <a id="api-root-link" href="#" target="_blank">Ouvrir l'API</a>
    </p>

    <div class="status" id="health-status">
        Vérification de l'état de l'API en cours...
    </div>

    <script>
        const apiHost = window.location.hostname;
        const apiPort = 8000; // En mode Docker Compose

        const apiBaseUrl = "http://" + apiHost + ":" + apiPort;
        document.getElementById("api-root-link").href = apiBaseUrl + "/";

        fetch(apiBaseUrl + "/health")
            .then(response => response.json())
            .then(data => {
                document.getElementById("health-status").textContent =
                    "API status: " + data.status + " (ts=" + data.ts + ")";
            })
            .catch(err => {
                document.getElementById("health-status").textContent =
                    "Impossible de joindre l'API sur " + apiBaseUrl + "/health";
            });
    </script>
</body>
</html>
